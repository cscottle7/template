{
    "name": "create_pr_from_staged_changes",
    "description": "Internal DAG to stage, commit, push, and create a PR.",
    "inputParameters": [
      "commit_message",
      "branch_name",
      "pr_title",
      "pr_body"
    ],
    "tasks": [
      {
        "name": "create_new_branch",
        "tool_id": "git.checkout",
        "inputMapping": {
          "branch": "$.workflow.inputs.branch_name",
          "new_branch": true
        }
      },
      {
        "name": "stage_all_changes",
        "tool_id": "git.add",
        "dependencies": [
          "create_new_branch"
        ],
        "inputMapping": {
          "files": [
            "."
          ]
        }
      },
      {
        "name": "commit_changes",
        "tool_id": "git.commit",
        "dependencies": [
          "stage_all_changes"
        ],
        "inputMapping": {
          "message": "$.workflow.inputs.commit_message"
        }
      },
      {
        "name": "push_branch",
        "tool_id": "git.push",
        "dependencies": [
          "commit_changes"
        ],
        "inputMapping": {
          "branch": "$.workflow.inputs.branch_name"
        }
      },
      {
        "name": "create_pull_request",
        "tool_id": "github.create_pull_request",
        "dependencies": [
          "push_branch"
        ],
        "inputMapping": {
          "title": "$.workflow.inputs.pr_title",
          "body": "$.workflow.inputs.pr_body",
          "head": "$.workflow.inputs.branch_name",
          "base": "main"
        }
      }
    ],
    "outputMapping": {
      "status": "Completed",
      "pull_request_url": "$.steps.create_pull_request.outputs.url"
    }
  }